!function(t){"use strict";var e="https://sandcash.mixienet.com.cn/gateway",n="https://sandcash.mixienet.com.cn/gateway/v2";function a({method:t,path:e,body:n,headers:a}){return new Promise((o,c)=>{const s=new XMLHttpRequest;s.open(t,e);for(const t in a){const e=a[t];s.setRequestHeader(t,e)}s.send(n),s.timeout=5e3,s.ontimeout=function(){c(new Error("连接超时"))},s.onerror=(t=>{c(new Error("网络错误"))}),s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<=400?o.call(void 0,s.responseText):s.status>=400&&c.call(void 0,s))}})}const o=function(){};o.prototype={cloudInit(t){var e=document.createElement("script"),n=document.getElementsByTagName("head")[0];e.type="text/javascript",e.src="https://res.wx.qq.com/open/js/cloudbase/1.1.0/cloud.js",e.addEventListener?e.addEventListener("load",function(){t()},!1):e.attachEvent&&e.attachEvent("onreadystatechange",function(){"loaded"===window.event.target.readyState&&t()}),n.appendChild(e)},async aliPayH5(t){const o={method:"POST",path:`${"RSA"===t.sign_type?n:e}/api`,body:JSON.stringify(t),headers:{"content-type":"application/json"}};return await a(o).then(t=>JSON.parse(t)).catch(t=>t)},async cloudPayH5(t,{resourceAppid:o,resourceEnv:c}){var s="";s="RSA"===t.sign_type?n:e;const r=await async function({resourceAppid:t,resourceEnv:e}){const n=new cloud.Cloud({identityless:!0,resourceAppid:t,resourceEnv:e});return await n.init(),n}({resourceAppid:o,resourceEnv:c}),i={method:"POST",path:`${s}/api`,body:JSON.stringify(t),headers:{"content-type":"application/json"}};return await a(i).then(async t=>{const e=JSON.parse(t),{data:n,ret_code:a}=e;return"000000"===a?await async function(t,e){return await t.callFunction({name:"public",data:{action:"getUrlScheme",token_id:e}}).then(t=>t).catch(t=>t)}(r,n.token_id):e}).catch(t=>t)},async cloudAccount(t){const o={method:"POST",path:`${"RSA"===t.sign_type?n:e}/api`,body:JSON.stringify(t),headers:{"content-type":"application/json"}};return await a(o).then(async t=>{const{data:n,ret_code:o}=JSON.parse(t);if("000000"===o){const t={method:"POST",path:`${e}/order/memberWallet`,body:JSON.stringify({token_id:n.token_id}),headers:{"content-type":"application/json"}};return await a(t).then(async t=>JSON.parse(t)).catch(t=>t)}return JSON.parse(t)}).catch(t=>t)}},t.H5PAY=new o}(this);